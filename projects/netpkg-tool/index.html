<!DOCTYPE html>
<html lang="en">

<head>
  <title>Phil Hawkins - netpkg-tool</title>
  
  <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


<!-- Ubuntu font CDN from Google -->
<link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono" rel="stylesheet">
<!-- Reference Custom CSS -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/links.css">
<link rel="stylesheet" href="/assets/css/navbar.css">
<link rel="stylesheet" href="/assets/css/syntax.css">
  <!-- Magic fix for switching orientations? -->
<script>
    $( document ).ready(function() {
      var width = $(window).width(),
        height = $(window).height();
      if ((width <= 768)) {
        $('.navbar').removeClass('navbar-fixed-top');
      }
    });
    $( window ).resize(function() {
      var width = $(window).width(),
        height = $(window).height();
      if ((width <= 768)) {
        $('.navbar').removeClass('navbar-fixed-top');
      }
      else {
        $('.navbar').addClass('navbar-fixed-top');
      }
    });
  </script>
</head>
</head>

<!-- Scrollpy body -->
<body class="main-background">

  <!-- Top Navbar -->
  <nav class="navbar navbar-default navbar-dark navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">Phil Hawkins</a>
    </div>
    <ul class="nav navbar-nav">
      
      
        
        
        
          <li class="">
            <a href="/index.html">Home</a>
          </li>
        
      
        
        
        
          <li class="">
            <a href="/resume/">Resume</a>
          </li>
        
      
        
        
        
          <li class="dropdown active">
            <a href="/projects/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Projects <span class="caret"></span></a>
            <ul class="dropdown-menu">
              
                
                  <li>
                    <a href="/projects/cliappbuilder/">CliAppBuilder</a>
                  </li>
                
              
                
                  <li>
                    <a href="/projects/govlib/">GovLib</a>
                  </li>
                
              
                
                  <li>
                    <a href="/projects/arc-plus/">Arc+</a>
                  </li>
                
              
                
                  <li>
                    <a href="/projects/shell.net/">Shell.NET</a>
                  </li>
                
              
                
                  <li>
                    <a href="/projects/netpkg-tool/">netpkg-tool</a>
                  </li>
                
              
            </ul>
          </li>
        
      
        
        
        
          <li class="dropdown ">
            <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Links <span class="caret"></span></a>
            <ul class="dropdown-menu">
              
                
                  <li>
                    <a href="https://github.com/phil-harmoniq">Github</a>
                  </li>
                
              
                
                  <li>
                    <a href="https://linkedin.com/in/phil-hawkins">LinkedIn</a>
                  </li>
                
              
                
                  <li>
                    <a href="https://travis-ci.org/phil-harmoniq">Travis CI</a>
                  </li>
                
              
                
                  <li>
                    <a href="https://www.nuget.org/profiles/ph-hawkins">Nuget</a>
                  </li>
                
              
            </ul>
          </li>
        
      
        
        
        
          <li class="">
            <a href="mailto:ph-hawkins@outlook.com">Email</a>
          </li>
        
      
    </ul>
  </div>
</nav>

  <link rel="stylesheet" href="/assets/css/inverse.css">

<!-- Top Jumbotron -->
<div class="jumbotron card dark-card">
  <div class="jumbo-background text-center">
    <div class="container main-title">
      <h1>Package Your .NET Apps On Linux</h1>
      <p></p>
      <img src="/assets/images/netpkg-tool/aspnet-example.png" class="main-img shadow"/> 
    </div>
  </div>
</div>

<!-- Overview Panel -->
<div class="container-fluid card light-card special-shadow" id="documentation">
  <div class="container readme-fit">
    <div class="row image-fit">
      
      <h1 id="netpkg-tool--">netpkg-tool <a href="https://travis-ci.org/phil-harmoniq/netpkg-tool"><img src="https://travis-ci.org/phil-harmoniq/netpkg-tool.svg?branch=master" alt="Build Status" /></a> <a href="https://github.com/phil-harmoniq/netpkg-tool/blob/master/README.md"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License" /></a></h1>

<p><img src="http://imgur.com/1wmkrX0.gif" width="84%" /></p>

<h2 id="download">Download</h2>

<h3 id="released-binary">Released Binary</h3>

<p>Pre-packaged versions of <em>netpkg-tool</em> are available from the <a href="https://github.com/phil-harmoniq/netpkg-tool/releases">releases tab</a>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Github releases are tagged with their version (ex: 0.3.10)</span>
wget https://github.com/phil-harmoniq/netpkg-tool/releases/download/0.3.10/netpkg-tool
<span class="nb">chmod </span>a+x ./netpkg-tool

<span class="c"># Place netpkg-tool somewhere on your $PATH (Optional)</span>
<span class="nb">mv</span> ./netpkg-tool ~/.local/bin
</code></pre></div></div>

<h3 id="docker-image">Docker Image</h3>

<p><em>netpkg-tool</em> is also available as a Docker image if you don’t want to install any dependencies:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Pull the latest netpkg-tool Docker image</span>
docker pull philharmoniq/netpkg-tool
</code></pre></div></div>

<p>For more information, see the <a href="https://github.com/phil-harmoniq/netpkg-tool/blob/master/docker/README.md">Docker README</a>.</p>

<h3 id="build-from-source">Build From Source</h3>

<p>To build netpkg-tool from source, run <code class="highlighter-rouge">build.sh</code> and specify a destination folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/phil-harmoniq/netpkg-tool
./netpkg-tool/build.sh ~/Desktop
</code></pre></div></div>

<h2 id="examples">Examples</h2>

<p>Packaging a simple <a href="https://github.com/phil-harmoniq/Hello">“Hello World”</a> app:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/phil-harmoniq/Hello
netpkg-tool Hello ~/Desktop
~/Desktop/Hello one two three
</code></pre></div></div>

<p>Packaging a default ASP.NET Core MVC template:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet new mvc <span class="nt">-n</span> aspnet-src
netpkg-tool aspnet-src <span class="nb">.</span> <span class="nt">-n</span> aspnet-pkg
./aspnet-pkg
</code></pre></div></div>

<h2 id="optional-flags">Optional Flags</h2>

<p><img src="http://imgur.com/NAUfM0N.png" width="84%" /></p>

<h2 id="aspnet">ASP.NET</h2>

<p>ASP.NET is picky about where its content root directory is located. By default, it searches for <code class="highlighter-rouge">wwwroot</code> in <code class="highlighter-rouge">Directory.GetCurrentDirectory()</code>. Using <em>netpkg-tool</em> on an unmodified ASP.NET project will result in your web app being unable to locate any of its assets. A simple workaround would be to check for the existence of an environment variable set by <em>netpkg-tool</em>, like <code class="highlighter-rouge">$NET_PKG</code>, and setting the content directory to the Assembly location if it exists. This will allow the project’s content to be found regardless of whether it’s packaged up or being run with <code class="highlighter-rouge">dotnet run</code>. Example:</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">assembly</span> <span class="p">=</span> <span class="n">Assembly</span><span class="p">.</span><span class="nf">GetExecutingAssembly</span><span class="p">().</span><span class="n">Location</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">pkgEnv</span> <span class="p">=</span> <span class="n">Environment</span><span class="p">.</span><span class="nf">GetEnvironmentVariable</span><span class="p">(</span><span class="s">"NET_PKG"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">pkgEnv</span><span class="p">))</span>
            <span class="nf">BuildWebHost</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">Directory</span><span class="p">.</span><span class="nf">GetCurrentDirectory</span><span class="p">()).</span><span class="nf">Run</span><span class="p">();</span>
        <span class="k">else</span>
            <span class="nf">BuildWebHost</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">Path</span><span class="p">.</span><span class="nf">GetDirectoryName</span><span class="p">(</span><span class="n">assembly</span><span class="p">)).</span><span class="nf">Run</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">IWebHost</span> <span class="nf">BuildWebHost</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">,</span> <span class="kt">string</span> <span class="n">root</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="n">WebHost</span><span class="p">.</span><span class="nf">CreateDefaultBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">UseContentRoot</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
            <span class="p">.</span><span class="n">UseStartup</span><span class="p">&lt;</span><span class="n">Startup</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="nf">Build</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="details">Details</h2>

<p>Using <em>netpkg-tool</em> will restore and compile your project based on settings in your <code class="highlighter-rouge">*.csproj</code> file. By default, <em>netpkg-tool</em> will use <a href="https://docs.microsoft.com/en-us/dotnet/core/deploying/#framework-dependent-deployments-fdd">Framework Dependent Deployment</a> to compile your project. To use <a href="https://docs.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd">Self-Contained Deployment</a>, use the <code class="highlighter-rouge">--scd</code> flag. The full process for <em>netpkg-tool</em>:</p>

<ol>
  <li>Restore project dependencies</li>
  <li>Compile .NET Core app</li>
  <li>Create AppDir and transfer files</li>
  <li>Run <em>appimagetool</em> on created AppDir</li>
  <li>Delete temporary files</li>
</ol>

<h2 id="dependencies">Dependencies</h2>

<ul>
  <li><a href="https://www.microsoft.com/net/core/preview">.NET Core 2.0 SDK</a>: Per-distro <a href="https://docs.microsoft.com/en-us/dotnet/core/rid-catalog">RID</a> tags were replaced with the universal <code class="highlighter-rouge">linux-x64</code> <a href="https://github.com/dotnet/cli/issues/2727">RID</a>, simplifying the Linux build process. Earlier versions <em>should</em> work with <em>netpkg-tool</em> but only using <a href="https://docs.microsoft.com/en-us/dotnet/core/deploying/#framework-dependent-deployments-fdd">Framework Dependent Deployment</a>.</li>
  <li><a href="https://github.com/AppImage/AppImageKit">appimagetool</a>: (Included) Bundles Linux applications into AppImages, currently utilizes version 9 of <em>appimagetool</em>.</li>
  <li><a href="https://github.com/phil-harmoniq/Shell.NET">Shell.NET</a>: (Included) .NET Standard library for interacting with Bash.</li>
</ul>

<h2 id="contributing">Contributing</h2>

<p>If you have a feature request or issue, feel free to submit an <a href="https://github.com/phil-harmoniq/netpkg-tool/issues">issue</a>. A pull request would be even better! Pull requests should target the <code class="highlighter-rouge">develop</code> branch.</p>

<h2 id="mono">Mono</h2>

<p>While this project is mainly aimed at Microsoft’s new <a href="https://www.microsoft.com/net/core/">.NET Core</a> ecosystem, it should be possible to eventually make this tool work with <a href="http://www.mono-project.com/">Mono</a>. Mono support is planned but no exact ETA can be given until the core utility is in a more stable state.</p>

<h2 id="disclaimer">Disclaimer</h2>

<p>The netpkg-tool project is still in alpha development. Names, commands, and features are subject to change. Please keep this in mind when using this utility.</p>

    </div>
  </div>
</div>

<!-- Source Panel -->
<div class="container-fluid" id="source">
  <div class="container docs-panel">
    <div class="row">

      <div class="col-md-4">
        <a href="https://github.com/phil-harmoniq/netpkg-tool">
          <img src="/assets/images/logos/github-white.svg" class="logo-img center-block" />
        </a>
      </div>
      
      <div class="col-md-4 vertical-center">
        <div class="container card vertical-center">
          <h3>If you'd like to dig deeper into the development of netpkg-tool, all of our source
          is available on Github. You can also see all of our build logs on Travis CI.</h3>
        </div>
      </div>

      <div class="col-md-4">
        <a href="https://travis-ci.org/phil-harmoniq/netpkg-tool">
          <img src="/assets/images/logos/travis-rgb.svg" class="logo-img center-block" />
        </a>
      </div>

    </div>
  </div>
</div>

<!-- Footer Panel -->
<div class="container-fluid special-shadow super-hi-box">
    <div class="container">
    </div>
  </div>
<div class="container-fluid light-card super-hi-box">
  <div class="container">
    <div class="row well card footer-card" align="center">
      
        <a href="https://github.com/phil-harmoniq">
          <img src="/assets/images/logos/github-black.svg" class="footer-icon" hspace="4" />
        </a>
      
        
      
      <a href="https://travis-ci.org/phil-harmoniq">
        <img src="/assets/images/logos/travis-ci-black.svg" class="footer-icon" hspace="4" />
      </a>
      
      
      
      <a href="https://www.linkedin.com/in/phil-hawkins">
        <img src="/assets/images/logos/linked-in-black.svg" class="footer-icon" hspace="4" />
      </a>
      
      <div class="well card footer-card text-center">
        <p>Copyright (c) 2018 - Phil Hawkins</p>
      </div>
    </div>
  </div>
</div>


</body>

</html>